(include './modules/variables.yuck')
(include './modules/clock-date.yuck')
(include './modules/workspaces.yuck')
(include './modules/active-window.yuck')
(include './modules/weather.yuck')
(include './modules/system-info.yuck')
(include './modules/network.yuck')

(defwindow bar
  :stacking 'fg'
  :wm-ignore true
  :monitor 0
  :namespace 'bar'
  :geometry (geometry :x '0%'
                      :y '0%'
                      :width '100%'
                      :height '50px'
                      :anchor 'top center'
  )
  :exclusive false
  (bar)
)

(defwidget bar []
  (box
    :space-evenly false
    :orientation 'h'
    (box
      :class 'bar-bg-only'
      :style 'margin-right: -${width - 9}px;'
    )
    (centerbox
      :class 'bar-normal'
      :width {width}
      (left)
      (center)
      (right)
    )
  )
)

(defwidget left []
  (eventbox
    (box
      :space-evenly false :spacing 5
      :valign 'start' :halign 'start'
      (revealer
        :reveal true
        :transition 'slideright'
        (system-info)
      )
    )
  )
)

(defwidget right []
  (eventbox
    (box
      :space-evenly false
      :spacing 5
      :halign 'end'
      :valign 'start'
      (network-info)
      (weather)
      (clock-date)
    )
  )
)

(defwidget center []
  (box
    :space-evenly false :orientation 'v'
    (box
      :valign 'start'
      :space-evenly false 
      :spacing 5
      :halign 'center'
      (box
        :space-evenly false
        :spacing 5
        :class 'module'
        (revealer
          :reveal true
          :transition 'slideright'
          :duration '0ms'
          (workspaces)
        )
        (revealer
          :reveal true
          :transition 'slideright'
          :duration '0ms'
          (activewindow)
        )
      )
    )
  )
)
